<form [formGroup]="form" (ngSubmit)="onSubmit($event)">
  <h4 class="h4 mb16">Информация о доставке</h4>


  <label class="tt-control-label mb16">
    Тип получателя
    <select class="tt-input" formControlName="type">
      <option [value]="ReceiverType.PERSON">Физическое лицо</option>
      <option [value]="ReceiverType.LEGAl">Юридическое лицо</option>
    </select>
  </label>

  <label class="tt-control-label mb16">
    Имя
    <input

      formControlName="name"
      class="tt-input"
      type="text"
      placeholder="Введите имя"
    />
  </label>


  @if (form.controls.name.touched && form.controls.name.hasError('required')) {
  <small>Обязательное поле</small>
  }

  @if (form.controls.type.value === ReceiverType.LEGAl) {
  <label class="tt-control-label mb16">
    ИНН
    <input
      formControlName="inn"
      class="tt-input"
      type="text"
      placeholder="Введите ИНН"
    />
  </label>
  } @else {
  <label class="tt-control-label mb16">
    Фамилия
    <input
      formControlName="lastName"
      class="tt-input"
      type="text"
      placeholder="Введите фамилию"
    />
  </label>
  }
  
  <div>
    <h4 class="h6 mb16">Адресс доставки</h4>
    <button class="btn btn-shadow mb20" (click)="addAddress()" >Добавить</button>

    @for (group of form.controls.addresses.controls; track group; let i = $index){

    <div class="form-grid" [formGroup]="group">
      <label class="tt-control-label">
        Город
        <input
          formControlName="city"
          class="tt-input"
          type="text"
          placeholder="Город"
        />
      </label>

      <label class="tt-control-label">
        Улица
        <input
          formControlName="street"
          class="tt-input"
          type="text"
          placeholder="Улица"
        />
      </label>

      <label class="tt-control-label">
        Дом
        <input
          formControlName="building"
          class="tt-input"
          type="text"
          placeholder="Дом"
        />
      </label>

      <label class="tt-control-label">
        Квартира
        <input
          formControlName="apartment"
          class="tt-input"
          type="text"
          placeholder="Квартира"
        />
      </label>



      <button class="btn" (click)="deleteAddress(i)">Удалить</button>

    </div>
    }
  </div>

  <button
    class="btn btn-shadow mb20" type="submit">Подтвердить</button>
</form>
